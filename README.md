# **Демков Михаил Кириллович БПИ212**
# **ИДЗ №3. Вариант 30**
_Задание решено на 6 баллов._ Для связи пишите в тг **@filledevoler**
## **Условие задания**
Разработать программу численного интегрирования функции y =
a + b ∗ x^3
(задаётся действительными числами а,b) в определённом
диапазоне целых (задаётся так же) методом трапеций (точность
вычислений = 0.0001).
## **Решение на 4 балла**
* Приведено решение на С (**integrate.c**)
* Компилируем с командой `gcc -S -O0 integrate.c`. Ключ -O0 гарантирует компиляцию без отладочных и оптимизирующих опций. 
* Комментарии добавлял к модифицированному коду на ассемблере (**mod_integrate.s**)
* Получим оптимизированный ассемблерный код без лишних макросов и отладочных опций с помощью команды `gcc -O2 -Wall -masm=intel -fno-asynchronous-unwind-tables -fcf-protection=none -S integrate.c -o mod_integrate.s` . Код стало быстрее и короче на 100 строк
* Проведем тестирование исполняемых файлов
    * Протестируем integrate.out. Воспользуемся для этого командой `./integrate.out < test1.txt` и увидим результат на скрине **integrate_test1.jpg**
    * Протестируем аналогично mod_integrate.out. Результат на скрине **mod_integrate_test1.jpg**. Результаты совпали, программа после оптимизации работает корректно
    * Повторим эти действия для **test2.txt** и **test3.txt** (скрины **integrate_test2/3.jpg** и **mod_integrate_test2/3.jpg**)
    * Результаты совпали везде, оптимизация успешная! 
## **Решение на 5 баллов**
* Изначально писал с использованием функций
* Локальные переменные использовались внутри функций (их инициализация описана комментариями в ассемблерном коде **mod_integrate.s**)
* Добавлены комментарии, описывающие передачу фактических параметров и возврат результата (**mod_integrate.s**)
* Написаны комментарии, описывающие связь между параметрами языка Си и регистрами
## **Решение на 6 баллов**
* Оптимизация программы достигнута путем использования регистров процессора (все благодаря компиляции с флагом -O2)
* Добавил комментарии, поясняющие эквивалентное использование регистров вместо переменных исходной программы на Си (**mod_integrate.s**)
* Тестовые прогоны и их результаты находятся в файлах:
    * **test1** : _integrate_test1.jpg / mod_integrate_test1.jpg_
    * **test2** : _integrate_test2.jpg / mod_integrate_test2.jpg_
    * **test3** : _integrate_test3.jpg / mod_integrate_test3.jpg_
* До модификации размер программы был 207 строк, а после 115. **Итого: минус _92 строки_.**